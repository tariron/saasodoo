---
apiVersion: v1
kind: ConfigMap
metadata:
  name: saasodoo-config
  namespace: saasodoo
data:
  # Domain Configuration
  BASE_DOMAIN: "62.171.153.219.nip.io"

  # PostgreSQL Configuration
  POSTGRES_HOST: "postgres.saasodoo.svc.cluster.local"
  POSTGRES_PORT: "5432"
  POSTGRES_DEFAULT_DB: "postgres"

  # Redis Configuration
  REDIS_HOST: "redis.saasodoo.svc.cluster.local"
  REDIS_PORT: "6379"
  REDIS_DB: "0"

  # RabbitMQ Configuration
  RABBITMQ_HOST: "rabbitmq.saasodoo.svc.cluster.local"
  RABBITMQ_PORT: "5672"
  RABBITMQ_VHOST: "saasodoo"
  RABBITMQ_USER: "saasodoo"

  # KillBill Configuration
  KILLBILL_URL: "http://killbill.saasodoo.svc.cluster.local:8080"
  KILLBILL_API_KEY: "fresh-tenant"
  KILLBILL_USERNAME: "admin"

  # PayNow Payment Gateway Configuration
  PAYNOW_RESULT_URL: "http://api.62.171.153.219.nip.io/billing/webhooks/paynow/result"
  PAYNOW_BASE_URL: "https://www.paynow.co.zw"

  # JWT Configuration
  JWT_ALGORITHM: "HS256"
  JWT_EXPIRE_MINUTES: "1440"

  # Service URLs
  NOTIFICATION_SERVICE_URL: "http://notification-service.saasodoo.svc.cluster.local:5000"
  FRONTEND_URL: "http://app.62.171.153.219.nip.io"

  # Kubernetes Configuration
  ORCHESTRATOR: "Kubernetes"
  KUBERNETES_NAMESPACE: "saasodoo"
  KUBERNETES_IN_CLUSTER: "true"

  # Docker Configuration (for compatibility)
  DOCKER_HOST: "unix:///var/run/docker.sock"

  # CephFS Configuration
  CEPHFS_MOUNT_PATH: "/mnt/cephfs"

  # Database Pool Configuration
  DB_POOL_MAX_INSTANCES: "10"
  DB_POOL_CPU_LIMIT: "2000m"
  DB_POOL_MEMORY_LIMIT: "4Gi"

  # Odoo Instance Configuration
  ODOO_INSTANCES_PATH: "/var/lib/odoo/instances"
  ODOO_BACKUPS_PATH: "/var/lib/odoo/backups"
  DEFAULT_ODOO_VERSION: "17.0"
  MAX_INSTANCES_PER_USER: "5"

  # Resource Limits (per Odoo instance)
  INSTANCE_CPU_LIMIT: "2000m"
  INSTANCE_MEMORY_LIMIT: "4Gi"
  INSTANCE_STORAGE_LIMIT: "10Gi"

  # Monitoring
  AUTO_START_MONITORING: "true"

  # Application Settings
  DEBUG: "false"
  LOG_LEVEL: "INFO"
  API_VERSION: "v1"

  # Celery Configuration
  C_FORCE_ROOT: "true"
  CELERY_POOL: "threads"

  FLASK_ENV: "development"
  FLASK_DEBUG: "0"
  ENVIRONMENT: "development"
  DEBUG: "true"
  LOG_LEVEL: "DEBUG"
  TIMEZONE: "Africa/Harare"

  # SMTP Configuration
  SMTP_HOST: "mailhog-service.saasodoo.svc.cluster.local"
  SMTP_PORT: "1025"
  SMTP_USE_TLS: "false"
  SMTP_USE_SSL: "false"
  SMTP_TIMEOUT: "10"
  DEFAULT_FROM_EMAIL: "tnya@saasodoo.com"
  DEFAULT_FROM_NAME: "SaaSOdoo Notifications" 
  # Rate Limiting
  MAX_EMAILS_PER_MINUTE: "100" 
  MAX_EMAILS_PER_HOUR: "1000"


  # Database Configuration
  DB_DATABASE_URL: "postgresql://notification_service:notification_service_secure_pass_change_me@postgres:5432/communication"
  DB_POOL_SIZE: "10"
  DB_MAX_OVERFLOW: "20"
  DB_POOL_MAX_OVERFLOW: "20"

  # Application Configuration
  APP_DEBUG: "true"
  APP_SERVICE_NAME: "notification-service"
  APP_SERVICE_VERSION: "1.0.0"
  APP_API_PREFIX: "/api/v1"
  APP_TEMPLATES_DIR: "app/templates"
  # Logging
  LOG_LEVEL: "info"

  


# SSH Passwordless Access Setup

  Setup passwordless SSH access between nodes in the cluster.

  ## Prerequisites

  - Root access to all nodes
  - All nodes on the same private network (10.0.0.x)

  ## Setup Instructions

  ### Step 1: Generate SSH Key Pair (on source node)

  ```bash
  # Generate 4096-bit RSA key
  ssh-keygen -t rsa -b 4096 -f ~/.ssh/id_rsa -N "" -C "ceph-cluster-key"

  # Verify keys exist
  ls -la ~/.ssh/id_rsa*

  Step 2: Configure SSH Client (on source node)

  cat >> ~/.ssh/config << 'EOF'
  Host 10.0.0.2 10.0.0.3
      IdentityFile ~/.ssh/id_rsa
      StrictHostKeyChecking no
      UserKnownHostsFile /dev/null
  EOF
  chmod 600 ~/.ssh/config

  Step 3: Copy Public Key to Target Nodes

  # Copy to each target node (enter password once per node)
  ssh-copy-id -i ~/.ssh/id_rsa.pub root@10.0.0.2
  ssh-copy-id -i ~/.ssh/id_rsa.pub root@10.0.0.3

  Step 4: Test Passwordless Access

  ssh root@10.0.0.2 'echo "SSH to 10.0.0.2 SUCCESS"'
  ssh root@10.0.0.3 'echo "SSH to 10.0.0.3 SUCCESS"'

  Adding Additional Nodes

  To add a new node (e.g., 10.0.0.4):

  # Copy key to new node
  ssh-copy-id -i ~/.ssh/id_rsa.pub root@10.0.0.4

  # Test access
  ssh root@10.0.0.4 'echo "SUCCESS"'

  # Optional: Update ~/.ssh/config to include new IP
  # Host 10.0.0.2 10.0.0.3 10.0.0.4

  Troubleshooting

  - Permission denied: Ensure ~/.ssh/authorized_keys on target has correct permissions (chmod 600)
  - Key not working: Verify public key is on a single line in authorized_keys (no line wrapping)
  - Directory permissions: ~/.ssh directory should be chmod 700